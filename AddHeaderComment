package com.wellsfargo;

import org.openrewrite.ExecutionContext;
import org.openrewrite.Recipe;
import org.openrewrite.java.JavaIsoVisitor;
import org.openrewrite.java.tree.J;

public class AddHeaderComment extends Recipe {

    @Override
    public String getDisplayName() {
        return "Add header comment";
    }

    @Override
    public String getDescription() {
        return "Always add a comment before the first class.";
    }

    @Override
    public JavaIsoVisitor<ExecutionContext> getVisitor() {
        return new JavaIsoVisitor<ExecutionContext>() {
            @Override
            public J.ClassDeclaration visitClassDeclaration(J.ClassDeclaration classDecl, ExecutionContext ctx) {
                J.ClassDeclaration cd = super.visitClassDeclaration(classDecl, ctx);

                // Add a comment at the start of the class
                if (cd.getComments().isEmpty()) {
                    return cd.withComments(
                        java.util.Collections.singletonList(
                            new org.openrewrite.java.tree.Comment.SingleLine("// Added by AddHeaderComment", "", null)
                        )
                    );
                }
                return cd;
            }
        };
    }
}
